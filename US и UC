Публикация товара на маркетплейсе из ЛК продавца


Цель
Дать продавцу в ЛК полный цикл: создать карточку товара, подготовить к публикации, отправить карточку, пройти модерацию, появиться на витрине, управлять изменениями/снятием.


Контекст и участники
- Продавец (основной пользователь ЛК)
-	Система ЛК/Каталог (валидации, хранение карточки)
-	Модерация (авто/ручная проверка)
-	Витрина маркетплейса (публичное отображение)
- Покупатель (косвенно - видит опубликованный товар)


User Story
Как продавец, я хочу опубликовать товар на маркетплейсе из ЛК, чтобы покупатели могли увидеть товар и оформить заказ

Критерии приемки:
1.	Продавец может создать/открыть карточку товара и заполнить обязательные поля;
2.	При попытке публикации система валидирует поля и показывает ошибки по конкретным полям;
3.	При успешной отправке на публикацию товар получает статус «На модерации» (или «Публикуется», если модерации нет);
4.	После успешной модерации товар становится «Опубликован» и появляется на витрине;
5.	При отклонении модерацией продавец видит статус «Отклонён» и причины/рекомендации;
6.	Продавец может снять товар с публикации (статус «Снят» / «Не опубликован»), при этом товар исчезает с витрины;
7.	Все смены статусов логируются (кто/когда/что изменил).


Требования к данным карточки
Обязательные поля (MVP):
- Название товара;
-	Категория;
-	Описание (или характеристики, зависит от категории);
-	Цена;
-	Остаток (или признак «под заказ»);
-	Изображения (минимум 1);
-	Параметры доставки/склада (если применимо);
- Атрибуты категории (например, бренд/размер/цвет — категорийные).


Служебные сущности:
-	Статус публикации: черновик / на модерации / отклонён / опубликован / снят;
-	Причины отклонения (список и комментарий);
-	Версия карточки (для понимания, что проверяли);


Use Case
UC-1: создать карточку товара (черновик)
Актор: продавец;
Предусловия: продавец авторизован, имеет права «управление товарами»;
Триггер: нажатие кнопки «Добавить товар».
Основной сценарий:
1.	Система открывает форму создания товара;
2.	Продавец заполняет поля, загружает фото;
3.	Продавец нажимает «Сохранить черновик»;
4.	Система сохраняет карточку со статусом Черновик;
5.	Постусловия: черновик доступен в списке товаров.

Альтернативы/ошибки:
-	Некорректные данные -> подсветка полей и сообщения об ошибках.


UC-2: отправить товар на публикацию (включая модерацию)
Актор: продавец;
Предусловия: карточка существует (обычно Черновик/Отклонён);
Триггер: нажатие кнопки «Опубликовать».
Основной сценарий:
1.	Система выполняет валидацию обязательных полей;
2.	Если всё ок - статус меняется на «На модерации»;
3.	Модерация проверяет карточку (авто/ручная);
4.	При успехе - статус «Опубликован», товар доступен на витрине;
5.	Постусловия: товар виден покупателям на витрине.

Альтернативные потоки:
2a) Валидация не пройдена -> статус не меняется, показываем ошибки;
4a) Модерация отклонила -> статус «Отклонён», продавец видит причины.


UC-3: просмотреть статус публикации и причины отклонения
Актор: продавец;
Предусловия: есть товары в любом статусе.
Основной сценарий:
1.	Продавец открывает список товаров;
2.	Видит статусы и дату изменения;
3.	Открывает карточку -> видит детали статуса (если «Отклонён» - причины);
4.	Постусловия: продавец понимает, что делать дальше.


UC-4: редактировать опубликованный товар
Актор: продавец;
Предусловия: товар опубликован.
Основной сценарий:
1.	Продавец вносит изменения;
2.	Система определяет тип изменений:
-	Безопасные (цена/остаток) -> применяются сразу;
-	Контентные (название/описание/фото/категория) -> требуют повторной модерации;
3.	Если нужна модерация - статус «На модерации» (товар может оставаться видимым по старой версии до решения);
4.	Постусловия: на витрине актуальные данные согласно правилам.


UC-5: снять товар с публикации
Актор: продавец;
Предусловия: товар опубликован.
Основной сценарий:
1.	Продавец нажимает «Снять с публикации»;
2.	Система запрашивает подтверждение;
3.	Статус становится «Снят», товар исчезает с витрины;
4.	Постусловия: Товар не доступен покупателям.

Нефункциональные требования:
-	Сохранение/публикация ≤ N секунд при нормальной нагрузке;
-	Публикация идемпотентна (повторный клик не создаёт дублей);
-	Наличие журнала действий и статусов;
-	Доступы только у пользователей продавца с нужными правами.
